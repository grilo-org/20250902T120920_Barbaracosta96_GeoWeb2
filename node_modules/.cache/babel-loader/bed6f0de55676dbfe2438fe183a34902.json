{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/sulli/Git/GeoWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/sulli/Git/GeoWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/sulli/Git/GeoWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from'axios';import Navbar from'../NavbarLaboratorio/navbarlaboratorio';import Conexao from'../../Config/conexao';import'./UploadFile.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UploadFile(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setArquivo=_useState2[1];var _useState3=useState('ok'),_useState4=_slicedToArray(_useState3,2),statu=_useState4[0],setStatu=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),resu=_useState6[0],setResul=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),base64code=_useState8[0],setbase64code=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),processo=_useState10[0],setProcesso=_useState10[1];function add(){return _add.apply(this,arguments);}function _add(){_add=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var formData,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(base64code);formData={image:image};_context.next=4;return axios.post('http://34.138.14.62/ApiReact/upload.php',formData);case 4:res=_context.sent;console.log(res.data);setResul(res.data.Processo);if(resu!==''){console.log(\"OK\");add2();}case 8:case\"end\":return _context.stop();}}},_callee);}));return _add.apply(this,arguments);};var onChange=function onChange(e){var files=e.target.files;var file=files[0];getBase64(file);};var onLoad=function onLoad(fileString){//console.log(fileString);\nsetArquivo(fileString);setbase64code(fileString);};var getBase64=function getBase64(file){var reader=new FileReader();reader.readAsDataURL(file);reader.onload=function(){onLoad(reader.result);};};function add2(){return _add2.apply(this,arguments);}function _add2(){_add2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var obj,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:obj={processo:processo,resu:resu};if(!(processo>0)){_context2.next=6;break;}_context2.next=4;return axios.post(Conexao.api+'InserteEnsaio.php',obj);case 4:res=_context2.sent;if(res.data.success===true){console.log('salvo com sucesso');}case 6:case\"end\":return _context2.stop();}}},_callee2);}));return _add2.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"formfile\",children:/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"ptexte\",children:\"Upload de arquivos\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"formfile3\",children:/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"ptexte2\",children:\"N\\xFAmero do processo\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"formfile0\",children:/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setProcesso(e.target.value);},type:\"text\",class:\"css-input\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"formfile4\",children:/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"ptexte2\",children:\"Cliente\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"formfile0\",children:/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setProcesso(e.target.value);},type:\"text\",class:\"css-input\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"formfile4\",children:/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"ptexte2\",children:\"N\\xFAmero da amostra\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"formfile0\",children:/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setProcesso(e.target.value);},type:\"text\",class:\"css-input\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"formfile4\",children:/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"ptexte2\",children:\"Obra\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"formfile0\",children:/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setProcesso(e.target.value);},type:\"text\",class:\"css-input\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"formfile1\",children:/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"formfile4\",type:\"file\",onChange:onChange})})}),/*#__PURE__*/_jsx(\"div\",{className:\"Ftp2\",children:/*#__PURE__*/_jsx(\"form\",{className:\"formFtp\",children:/*#__PURE__*/_jsx(\"button\",{onClick:add,type:\"button\",className:\"btnsave\",children:\"Salvar\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"Ftp2\"})]});}export default UploadFile;","map":{"version":3,"names":["React","useState","useEffect","axios","Navbar","Conexao","UploadFile","image","setArquivo","statu","setStatu","resu","setResul","base64code","setbase64code","processo","setProcesso","add","console","log","formData","post","res","data","Processo","add2","onChange","e","files","target","file","getBase64","onLoad","fileString","reader","FileReader","readAsDataURL","onload","result","obj","api","success","value"],"sources":["C:/Users/sulli/Git/GeoWeb/src/app/Laboratorio/UploadFile/UploadFile.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from 'axios';\r\nimport Navbar from '../NavbarLaboratorio/navbarlaboratorio';\r\nimport Conexao from '../../Config/conexao';\r\nimport './UploadFile.css'\r\n\r\nfunction UploadFile() {\r\n\r\n    const [image, setArquivo] = useState()\r\n    const [statu, setStatu] = useState('ok')\r\n    const [resu, setResul] = useState('')\r\n    const [base64code, setbase64code] = useState()\r\n    const [processo, setProcesso] = useState()\r\n\r\n    async function add() {\r\n        console.log(base64code)\r\n        const formData = { image };\r\n         const res = await axios.post('http://34.138.14.62/ApiReact/upload.php', formData);\r\n        console.log(res.data)\r\n        setResul(res.data.Processo)\r\n        if (resu !=='') {\r\n            console.log(\"OK\")\r\n             add2()\r\n        }\r\n    };\r\n\r\n    const onChange = e => {\r\n        const files = e.target.files;\r\n        const file = files[0];\r\n        getBase64(file);\r\n    };\r\n\r\n    const onLoad = fileString => {\r\n        //console.log(fileString);\r\n        setArquivo(fileString)\r\n        setbase64code(fileString)\r\n    };\r\n\r\n    const getBase64 = file => {\r\n        let reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = () => {\r\n            onLoad(reader.result);\r\n        };\r\n    };\r\n    async function add2() {\r\n\r\n\r\n        const obj = { processo, resu };\r\n\r\n        if (processo > 0) {\r\n            const res = await axios.post(Conexao.api + 'InserteEnsaio.php', obj);\r\n            if (res.data.success === true) {\r\n\r\n                console.log('salvo com sucesso')\r\n\r\n            }\r\n        }\r\n    }\r\n    return (<div>\r\n        <Navbar />\r\n        <div className=\"formfile\">\r\n            <form >\r\n                <p className=\"ptexte\">Upload de arquivos</p>\r\n            </form>\r\n        </div>\r\n        <div className=\"formfile3\">\r\n            <form >\r\n                <p className=\"ptexte2\">Número do processo</p>\r\n            </form>\r\n        </div>\r\n        <div className=\"formfile0\">\r\n            <input onChange={(e) => setProcesso(e.target.value)} type=\"text\" class=\"css-input\" />\r\n        </div>\r\n        <div className=\"formfile4\">\r\n            <form >\r\n                <p className=\"ptexte2\">Cliente</p>\r\n            </form>\r\n        </div>\r\n        <div className=\"formfile0\">\r\n            <input onChange={(e) => setProcesso(e.target.value)} type=\"text\" class=\"css-input\" />\r\n        </div>\r\n        <div className=\"formfile4\">\r\n            <form >\r\n                <p className=\"ptexte2\">Número da amostra</p>\r\n            </form>\r\n        </div>\r\n        <div className=\"formfile0\">\r\n            <input onChange={(e) => setProcesso(e.target.value)} type=\"text\" class=\"css-input\" />\r\n        </div>\r\n        <div className=\"formfile4\">\r\n            <form >\r\n                <p className=\"ptexte2\">Obra</p>\r\n            </form>\r\n        </div>\r\n        <div className=\"formfile0\">\r\n            <input onChange={(e) => setProcesso(e.target.value)} type=\"text\" class=\"css-input\" />\r\n        </div>\r\n        <div className=\"formfile1\" >\r\n\r\n            <form  >\r\n                <input className=\"formfile4\" type=\"file\" onChange={onChange} />\r\n            </form>\r\n\r\n        </div>\r\n        \r\n        <div className=\"Ftp2\" >\r\n            <form className=\"formFtp\" >\r\n\r\n                <button onClick={add} type=\"button\" className=\"btnsave\">Salvar</button>\r\n            </form>\r\n        </div>\r\n        <div className=\"Ftp2\" ></div>\r\n    </div>\r\n    );\r\n}\r\nexport default UploadFile"],"mappings":"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"},"metadata":{},"sourceType":"module"}