{"ast":null,"code":"import { __extends } from \"tslib\";\nimport PDFDict from \"../objects/PDFDict\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFRef from \"../objects/PDFRef\";\nimport PDFString from \"../objects/PDFString\";\nimport PDFHexString from \"../objects/PDFHexString\";\nimport BorderStyle from \"./BorderStyle\";\nimport PDFAnnotation from \"./PDFAnnotation\";\nimport AppearanceCharacteristics from \"./AppearanceCharacteristics\";\nvar PDFWidgetAnnotation = /** @class */function (_super) {\n  __extends(PDFWidgetAnnotation, _super);\n  function PDFWidgetAnnotation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  PDFWidgetAnnotation.prototype.MK = function () {\n    var MK = this.dict.lookup(PDFName.of('MK'));\n    if (MK instanceof PDFDict) return MK;\n    return undefined;\n  };\n  PDFWidgetAnnotation.prototype.BS = function () {\n    var BS = this.dict.lookup(PDFName.of('BS'));\n    if (BS instanceof PDFDict) return BS;\n    return undefined;\n  };\n  PDFWidgetAnnotation.prototype.DA = function () {\n    var da = this.dict.lookup(PDFName.of('DA'));\n    if (da instanceof PDFString || da instanceof PDFHexString) return da;\n    return undefined;\n  };\n  PDFWidgetAnnotation.prototype.P = function () {\n    var P = this.dict.get(PDFName.of('P'));\n    if (P instanceof PDFRef) return P;\n    return undefined;\n  };\n  PDFWidgetAnnotation.prototype.setP = function (page) {\n    this.dict.set(PDFName.of('P'), page);\n  };\n  PDFWidgetAnnotation.prototype.setDefaultAppearance = function (appearance) {\n    this.dict.set(PDFName.of('DA'), PDFString.of(appearance));\n  };\n  PDFWidgetAnnotation.prototype.getDefaultAppearance = function () {\n    var DA = this.DA();\n    if (DA instanceof PDFHexString) {\n      return DA.decodeText();\n    }\n    return DA === null || DA === void 0 ? void 0 : DA.asString();\n  };\n  PDFWidgetAnnotation.prototype.getAppearanceCharacteristics = function () {\n    var MK = this.MK();\n    if (MK) return AppearanceCharacteristics.fromDict(MK);\n    return undefined;\n  };\n  PDFWidgetAnnotation.prototype.getOrCreateAppearanceCharacteristics = function () {\n    var MK = this.MK();\n    if (MK) return AppearanceCharacteristics.fromDict(MK);\n    var ac = AppearanceCharacteristics.fromDict(this.dict.context.obj({}));\n    this.dict.set(PDFName.of('MK'), ac.dict);\n    return ac;\n  };\n  PDFWidgetAnnotation.prototype.getBorderStyle = function () {\n    var BS = this.BS();\n    if (BS) return BorderStyle.fromDict(BS);\n    return undefined;\n  };\n  PDFWidgetAnnotation.prototype.getOrCreateBorderStyle = function () {\n    var BS = this.BS();\n    if (BS) return BorderStyle.fromDict(BS);\n    var bs = BorderStyle.fromDict(this.dict.context.obj({}));\n    this.dict.set(PDFName.of('BS'), bs.dict);\n    return bs;\n  };\n  PDFWidgetAnnotation.prototype.getOnValue = function () {\n    var _a;\n    var normal = (_a = this.getAppearances()) === null || _a === void 0 ? void 0 : _a.normal;\n    if (normal instanceof PDFDict) {\n      var keys = normal.keys();\n      for (var idx = 0, len = keys.length; idx < len; idx++) {\n        var key = keys[idx];\n        if (key !== PDFName.of('Off')) return key;\n      }\n    }\n    return undefined;\n  };\n  PDFWidgetAnnotation.fromDict = function (dict) {\n    return new PDFWidgetAnnotation(dict);\n  };\n  PDFWidgetAnnotation.create = function (context, parent) {\n    var dict = context.obj({\n      Type: 'Annot',\n      Subtype: 'Widget',\n      Rect: [0, 0, 0, 0],\n      Parent: parent\n    });\n    return new PDFWidgetAnnotation(dict);\n  };\n  return PDFWidgetAnnotation;\n}(PDFAnnotation);\nexport default PDFWidgetAnnotation;","map":{"version":3,"mappings":";AAAA,OAAOA,OAAO;AACd,OAAOC,OAAO;AACd,OAAOC,MAAM;AACb,OAAOC,SAAS;AAChB,OAAOC,YAAY;AAEnB,OAAOC,WAAW;AAClB,OAAOC,aAAa;AACpB,OAAOC,yBAAyB;AAEhC;EAAkCC;EAAlC;;EAmGA;EArFEC,gCAAE,GAAF;IACE,IAAMC,EAAE,GAAG,IAAI,CAACC,IAAI,CAACC,MAAM,CAACX,OAAO,CAACY,EAAE,CAAC,IAAI,CAAC,CAAC;IAC7C,IAAIH,EAAE,YAAYV,OAAO,EAAE,OAAOU,EAAE;IACpC,OAAOI,SAAS;EAClB,CAAC;EAEDL,gCAAE,GAAF;IACE,IAAMM,EAAE,GAAG,IAAI,CAACJ,IAAI,CAACC,MAAM,CAACX,OAAO,CAACY,EAAE,CAAC,IAAI,CAAC,CAAC;IAC7C,IAAIE,EAAE,YAAYf,OAAO,EAAE,OAAOe,EAAE;IACpC,OAAOD,SAAS;EAClB,CAAC;EAEDL,gCAAE,GAAF;IACE,IAAMO,EAAE,GAAG,IAAI,CAACL,IAAI,CAACC,MAAM,CAACX,OAAO,CAACY,EAAE,CAAC,IAAI,CAAC,CAAC;IAC7C,IAAIG,EAAE,YAAYb,SAAS,IAAIa,EAAE,YAAYZ,YAAY,EAAE,OAAOY,EAAE;IACpE,OAAOF,SAAS;EAClB,CAAC;EAEDL,+BAAC,GAAD;IACE,IAAMQ,CAAC,GAAG,IAAI,CAACN,IAAI,CAACO,GAAG,CAACjB,OAAO,CAACY,EAAE,CAAC,GAAG,CAAC,CAAC;IACxC,IAAII,CAAC,YAAYf,MAAM,EAAE,OAAOe,CAAC;IACjC,OAAOH,SAAS;EAClB,CAAC;EAEDL,kCAAI,GAAJ,UAAKU,IAAY;IACf,IAAI,CAACR,IAAI,CAACS,GAAG,CAACnB,OAAO,CAACY,EAAE,CAAC,GAAG,CAAC,EAAEM,IAAI,CAAC;EACtC,CAAC;EAEDV,kDAAoB,GAApB,UAAqBY,UAAkB;IACrC,IAAI,CAACV,IAAI,CAACS,GAAG,CAACnB,OAAO,CAACY,EAAE,CAAC,IAAI,CAAC,EAAEV,SAAS,CAACU,EAAE,CAACQ,UAAU,CAAC,CAAC;EAC3D,CAAC;EAEDZ,kDAAoB,GAApB;IACE,IAAMa,EAAE,GAAG,IAAI,CAACA,EAAE,EAAE;IAEpB,IAAIA,EAAE,YAAYlB,YAAY,EAAE;MAC9B,OAAOkB,EAAE,CAACC,UAAU,EAAE;;IAGxB,OAAOD,EAAE,aAAFA,EAAE,uBAAFA,EAAE,CAAEE,QAAQ;EACrB,CAAC;EAEDf,0DAA4B,GAA5B;IACE,IAAMC,EAAE,GAAG,IAAI,CAACA,EAAE,EAAE;IACpB,IAAIA,EAAE,EAAE,OAAOH,yBAAyB,CAACkB,QAAQ,CAACf,EAAE,CAAC;IACrD,OAAOI,SAAS;EAClB,CAAC;EAEDL,kEAAoC,GAApC;IACE,IAAMC,EAAE,GAAG,IAAI,CAACA,EAAE,EAAE;IACpB,IAAIA,EAAE,EAAE,OAAOH,yBAAyB,CAACkB,QAAQ,CAACf,EAAE,CAAC;IAErD,IAAMgB,EAAE,GAAGnB,yBAAyB,CAACkB,QAAQ,CAAC,IAAI,CAACd,IAAI,CAACgB,OAAO,CAACC,GAAG,CAAC,EAAE,CAAC,CAAC;IACxE,IAAI,CAACjB,IAAI,CAACS,GAAG,CAACnB,OAAO,CAACY,EAAE,CAAC,IAAI,CAAC,EAAEa,EAAE,CAACf,IAAI,CAAC;IACxC,OAAOe,EAAE;EACX,CAAC;EAEDjB,4CAAc,GAAd;IACE,IAAMM,EAAE,GAAG,IAAI,CAACA,EAAE,EAAE;IACpB,IAAIA,EAAE,EAAE,OAAOV,WAAW,CAACoB,QAAQ,CAACV,EAAE,CAAC;IACvC,OAAOD,SAAS;EAClB,CAAC;EAEDL,oDAAsB,GAAtB;IACE,IAAMM,EAAE,GAAG,IAAI,CAACA,EAAE,EAAE;IACpB,IAAIA,EAAE,EAAE,OAAOV,WAAW,CAACoB,QAAQ,CAACV,EAAE,CAAC;IAEvC,IAAMc,EAAE,GAAGxB,WAAW,CAACoB,QAAQ,CAAC,IAAI,CAACd,IAAI,CAACgB,OAAO,CAACC,GAAG,CAAC,EAAE,CAAC,CAAC;IAC1D,IAAI,CAACjB,IAAI,CAACS,GAAG,CAACnB,OAAO,CAACY,EAAE,CAAC,IAAI,CAAC,EAAEgB,EAAE,CAAClB,IAAI,CAAC;IACxC,OAAOkB,EAAE;EACX,CAAC;EAEDpB,wCAAU,GAAV;;IACE,IAAMqB,MAAM,SAAG,IAAI,CAACC,cAAc,EAAE,0CAAED,MAAM;IAE5C,IAAIA,MAAM,YAAY9B,OAAO,EAAE;MAC7B,IAAMgC,IAAI,GAAGF,MAAM,CAACE,IAAI,EAAE;MAC1B,KAAK,IAAIC,GAAG,GAAG,CAAC,EAAEC,GAAG,GAAGF,IAAI,CAACG,MAAM,EAAEF,GAAG,GAAGC,GAAG,EAAED,GAAG,EAAE,EAAE;QACrD,IAAMG,GAAG,GAAGJ,IAAI,CAACC,GAAG,CAAC;QACrB,IAAIG,GAAG,KAAKnC,OAAO,CAACY,EAAE,CAAC,KAAK,CAAC,EAAE,OAAOuB,GAAG;;;IAI7C,OAAOtB,SAAS;EAClB,CAAC;EAjGML,4BAAQ,GAAG,UAACE,IAAa;IAC9B,WAAIF,mBAAmB,CAACE,IAAI,CAAC;EAA7B,CAA6B;EAExBF,0BAAM,GAAG,UAACkB,OAAmB,EAAEU,MAAc;IAClD,IAAM1B,IAAI,GAAGgB,OAAO,CAACC,GAAG,CAAC;MACvBU,IAAI,EAAE,OAAO;MACbC,OAAO,EAAE,QAAQ;MACjBC,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;MAClBC,MAAM,EAAEJ;KACT,CAAC;IACF,OAAO,IAAI5B,mBAAmB,CAACE,IAAI,CAAC;EACtC,CAAC;EAuFH,0BAAC;CAAA,CAnGiCL,aAAa;AAqG/C,eAAeG,mBAAmB","names":["PDFDict","PDFName","PDFRef","PDFString","PDFHexString","BorderStyle","PDFAnnotation","AppearanceCharacteristics","__extends","PDFWidgetAnnotation","MK","dict","lookup","of","undefined","BS","da","P","get","page","set","appearance","DA","decodeText","asString","fromDict","ac","context","obj","bs","normal","getAppearances","keys","idx","len","length","key","parent","Type","Subtype","Rect","Parent"],"sourceRoot":"","sources":["../../../src/core/annotation/PDFWidgetAnnotation.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}